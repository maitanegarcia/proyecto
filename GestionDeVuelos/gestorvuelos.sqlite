DROP DATABASE IF EXISTS GESTORVUELOS;
CREATE DATABASE GESTORVUELOS;
USE GESTORVUELOS;


CREATE TABLE ADMINISTRADOR(
	DNI_ADMIN INT(9),
    NOM_ADMIN VARCHAR(15),
    APELLIDOS_ADMIN VARCHAR(30),
    CORREO VARCHAR(30),
    CONTRASENIA VARCHAR(30),
    PRIMARY KEY(DNI_ADMIN)
);
CREATE TABLE CIUDAD( 
	COD_CIUD INT(8),
    NOM_CIUD VARCHAR(20),
    PRIMARY KEY(COD_CIUD)
);
CREATE TABLE CLASE(
	COD_CLASE INT(9),
    NOM_CLASE VARCHAR(15),
    PRIMARY KEY(COD_CLASE)
);
CREATE TABLE COMPANIA(
	COD_COMP INT(9),
    NOM_COMP VARCHAR(15),
    PRIMARY KEY(COD_COMP)
);
CREATE TABLE CLIENTE(
	DNI_CL VARCHAR(9),
    NOM_CL VARCHAR(15),
    EMAIL VARCHAR(40),
    CLAVE VARCHAR(40),
    PRIMARY KEY(DNI_CL)
);
CREATE TABLE VUELO( 
	COD_VU INT(8),
    FECHA DATE,
    HORA TIME,
    PLAZAS INT(3),
    CORIGEN INT(8),
    CDESTINO INT(8),
    COD_COMP INT(8),
    PRIMARY KEY(COD_VU),
    FOREIGN KEY(CORIGEN) REFERENCES CIUDAD(COD_CIUD),
    FOREIGN KEY(COD_COMP) REFERENCES COMPANIA(COD_COMP),
    FOREIGN KEY(CDESTINO) REFERENCES CIUDAD(COD_CIUD)
);
CREATE TABLE BILLETE(
	COD_B INT(8),
    ASIENTO VARCHAR(3),
    COD_CLASE INT(9),
    DNI_CL VARCHAR(9),
    COD_VU INT(8),
    PRIMARY KEY(COD_B),
    FOREIGN KEY(COD_CLASE) REFERENCES CLASE(COD_CLASE),
    FOREIGN KEY(DNI_CL) REFERENCES CLIENTE(DNI_CL),
    FOREIGN KEY(COD_VU) REFERENCES VUELO(COD_VU)
);

USE GESTORVUELOS;

INSERT INTO ADMINISTRADOR VALUES (00000001, 'LUCAS','PEREZ','lucasperez@gmail.com','lucasperez');
INSERT INTO ADMINISTRADOR VALUES (00000002, 'ANA','GARCIA','anagarcia@gmail.com','anagarcia');
INSERT INTO ADMINISTRADOR VALUES (00000003, 'LUCIA','GONZALEZ','luciagonzalez@gmail.com','luciagonzalez');
INSERT INTO ADMINISTRADOR VALUES (00000004, 'CARLOS','MARTINEZ','carlosmartinez@gmail.com','carlosmartinez');
INSERT INTO ADMINISTRADOR VALUES (00000005, 'JUAN','GARCIA','juangarcia@gmail.com','juangarcia');

INSERT INTO CIUDAD VALUES (00000001,'MALAGA');
INSERT INTO CIUDAD VALUES (00000002,'BILBAO');
INSERT INTO CIUDAD VALUES (00000003,'MADRID');
INSERT INTO CIUDAD VALUES (00000004,'BARCELONA');
INSERT INTO CIUDAD VALUES (00000005,'ZARAGOZA');

INSERT INTO CLASE VALUES(00000001,'PRIMERA');
INSERT INTO CLASE VALUES(00000002,'BUSINESS');
INSERT INTO CLASE VALUES(00000003,'TURISTA');

INSERT INTO COMPANIA VALUES(00000001,'RYANAIR');
INSERT INTO COMPANIA VALUES(00000002,'IBERIA');
INSERT INTO COMPANIA VALUES(00000003,'EMIRATES');

INSERT INTO CLIENTE VALUES(000000001,'MARINA GARCIA','marinagarcia@gmail.com','marinagarcia');
INSERT INTO CLIENTE VALUES(000000002,'MARcos GARCIA','marcosgarcia@gmail.com','marcosgarcia');
INSERT INTO CLIENTE VALUES(000000003,'JORGE TORRES','jorgetorres@gmail.com','jorgetorres');
INSERT INTO CLIENTE VALUES(000000004,'MARIO FERNANDEZ','mariofernandez@gmail.com','mariofernandez');
INSERT INTO CLIENTE VALUES(000000005,'SARA RODRIGEZ','sararodriguez@gmail.com','sararodriguez');

INSERT INTO VUELO VALUES(00000001,'2022-05-02','12:00',120,00000001,00000002,00000001);
INSERT INTO VUELO VALUES(00000002,'2022-06-03','17:00',160,00000003,00000002,00000002);
INSERT INTO VUELO VALUES(00000003,'2022-10-12','19:00',120,00000002,00000004,00000001);
INSERT INTO VUELO VALUES(00000004,'2022-05-012','21:00',140,00000002,00000001,00000003);
INSERT INTO VUELO VALUES(00000005,'2022-09-12','16:00',130,00000005,00000004,00000003);

INSERT INTO BILLETE VALUES(00000001,'15A',00000001,000000002,00000001);
INSERT INTO BILLETE VALUES(00000002,'12C',00000002,000000003,00000002);
INSERT INTO BILLETE VALUES(00000001,'22A',00000003,000000005,00000003);
INSERT INTO BILLETE VALUES(00000001,'17A',00000002,000000004,00000004);
INSERT INTO BILLETE VALUES(00000001,'20A',00000001,000000001,00000005);